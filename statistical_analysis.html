<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Statistical Analysis</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="team.html">Meet the Team</a>
    </li>
    <li>
      <a href="about.html">Data Source</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="demographics.html">Descriptive Analysis</a>
</li>
<li>
  <a href="statistical_analysis.html">Statistical Analysis</a>
</li>
<li>
  <a href="report.html">Project Report</a>
</li>
<li>
  <a href="https://github.com/pradeetim/final_redline.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Statistical Analysis</h1>

</div>


<div id="desciptive-characteristics-based-on-redlining-grades"
class="section level2">
<h2>Desciptive Characteristics Based on Redlining Grades</h2>
<div id="total-count-of-census-tract-for-each-holc-grade"
class="section level3">
<h3>Total count of census tract for each HOLC grade</h3>
<pre class="r"><code>final_analysis |&gt;
  group_by(red_grade)|&gt;
  summarise(count = n())|&gt;
   knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">red_grade</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="right">36</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="right">352</td>
</tr>
<tr class="odd">
<td align="left">C</td>
<td align="right">1003</td>
</tr>
<tr class="even">
<td align="left">D</td>
<td align="right">642</td>
</tr>
</tbody>
</table>
<p>The number of A-grade census tract is the smallest (n=36) while the
number of C-grade census tract is the biggest(n=1003).</p>
</div>
<div id="comparison-of-holc-grades" class="section level3">
<h3>Comparison of HOLC grades</h3>
<pre class="r"><code>redlining_grades=
final_analysis |&gt;
  group_by(red_grade) |&gt;
  summarise(
    avg_snap = mean(ph_snap, na.rm = TRUE),
    sd_snap = sd(ph_snap, na.rm = TRUE),
    avg_elderly = mean(ph_elderly,na.rm=TRUE),
    sd_elderly = sd(ph_elderly, na.rm = TRUE),
    avg_child = mean(ph_with_children, na.rm = TRUE),
    sd_child = sd(ph_with_children, na.rm = TRUE),
    avg_poverty = mean(ph_below_poverty, na.rm = TRUE),
    sd_poverty = sd(ph_below_poverty, na.rm = TRUE),
    avg_disability = mean(ph_disability, na.rm = TRUE),
    sd_disability = sd(ph_disability, na.rm = TRUE),
    avg_white = mean(ph_white, na.rm = TRUE),
    sd_white = sd(ph_white, na.rm = TRUE),
    avg_black = mean(ph_black, na.rm = TRUE),
    sd_black = sd(ph_black, na.rm = TRUE),
    avg_asian = mean(ph_asian, na.rm = TRUE),
    sd_asian = sd(ph_asian, na.rm = TRUE),
    avg_otherrace = mean(ph_other_race, na.rm = TRUE),
    sd_otherrace = sd(ph_other_race, na.rm = TRUE),
    avg_hispanic = mean(ph_hispanic, na.rm = TRUE),
    sd_hispanic = sd(ph_hispanic, na.rm = TRUE),
    avg_nowork = mean(ph_no_work, na.rm = TRUE),
    sd_nowork = sd(ph_no_work, na.rm = TRUE),
    avg_1work = mean(ph_1_work, na.rm = TRUE),
    sd_1work = sd(ph_1_work, na.rm = TRUE),
    avg_2work = mean(ph_2_work, na.rm = TRUE),
    sd_2work = sd(ph_2_work, na.rm = TRUE),
    avg_obesity = mean(obesity, na.rm = TRUE),
    sd_obesity = sd(obesity, na.rm = TRUE),
    avg_highchol = mean(highchol, na.rm = TRUE),
    sd_highchol = sd(highchol, na.rm = TRUE),
    avg_diabetes = mean(diabetes, na.rm = TRUE),
    sd_diabetes = sd(diabetes, na.rm = TRUE)
  )|&gt; pivot_longer(
    cols = -red_grade,
    names_to = c(&quot;stat&quot;, &quot;variable&quot;),
    names_sep = &quot;_&quot;
  )|&gt;
  pivot_wider(
    names_from = c(red_grade, stat), 
    values_from = value,              
    names_glue = &quot;{red_grade}_{stat}&quot;
  )

anova = function(dataset, outcomes, predictor) {
  results = list() 
  for (outcome in outcomes) {
    formula = as.formula(paste(outcome, &quot;~&quot;, factor(predictor)))
    model= aov(
      formula,
      data = dataset
    )
    results[[outcome]] = broom::tidy(model)
  }
  
  combined_results = bind_rows(results, .id = &quot;outcome&quot;)
  return(combined_results)
}

outcomes = c(&quot;ph_snap&quot;,&quot;ph_with_children&quot;, &quot;ph_elderly&quot;,&quot;ph_below_poverty&quot;, &quot;ph_disability&quot;, &quot;ph_white&quot;, &quot;ph_black&quot;, &quot;ph_asian&quot;, &quot;ph_other_race&quot;, &quot;ph_hispanic&quot;, &quot;ph_no_work&quot;,&quot;ph_1_work&quot;, &quot;ph_2_work&quot;, &quot;obesity&quot;, &quot;highchol&quot;, &quot;diabetes&quot;)

baseline_char = 
anova(final_analysis, outcomes, &quot;red_grade&quot;)|&gt;
  filter(term == &quot;red_grade&quot;)|&gt;
  rename(variable = outcome)|&gt;
  mutate(variable = case_when(
    variable == &quot;ph_snap&quot; ~ &quot;snap&quot;,
    variable == &quot;ph_with_children&quot; ~ &quot;child&quot;,
    variable == &quot;ph_elderly&quot; ~ &quot;elderly&quot;,
    variable == &quot;ph_below_poverty&quot; ~ &quot;poverty&quot;,
    variable == &quot;ph_no_work&quot; ~ &quot;nowork&quot;,
    variable == &quot;ph_white&quot; ~ &quot;white&quot;,
    variable == &quot;ph_black&quot; ~ &quot;black&quot;,
    variable == &quot;ph_asian&quot; ~ &quot;asian&quot;,
    variable == &quot;ph_other_race&quot; ~ &quot;otherrace&quot;,
    variable == &quot;ph_disability&quot; ~ &quot;disability&quot;,
    variable == &quot;ph_hispanic&quot; ~ &quot;hispanic&quot;,
    TRUE ~ variable
  ))|&gt;
  inner_join(redlining_grades, by=&quot;variable&quot;)|&gt;
  select(variable, A_avg:D_sd,  p.value)


baseline_char|&gt;
  filter(!variable %in% c(&quot;obesity&quot;,&quot;diabetes&quot;,&quot;highchol&quot;))|&gt;
  knitr::kable(digits = 3)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="14%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="right">A_avg</th>
<th align="right">A_sd</th>
<th align="right">B_avg</th>
<th align="right">B_sd</th>
<th align="right">C_avg</th>
<th align="right">C_sd</th>
<th align="right">D_avg</th>
<th align="right">D_sd</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">snap</td>
<td align="right">5.722</td>
<td align="right">6.947</td>
<td align="right">17.249</td>
<td align="right">13.613</td>
<td align="right">18.625</td>
<td align="right">13.397</td>
<td align="right">23.695</td>
<td align="right">17.848</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">child</td>
<td align="right">20.572</td>
<td align="right">7.435</td>
<td align="right">28.063</td>
<td align="right">9.465</td>
<td align="right">31.655</td>
<td align="right">10.694</td>
<td align="right">28.920</td>
<td align="right">13.282</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">elderly</td>
<td align="right">52.581</td>
<td align="right">12.823</td>
<td align="right">44.947</td>
<td align="right">11.384</td>
<td align="right">44.007</td>
<td align="right">11.823</td>
<td align="right">35.448</td>
<td align="right">13.569</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">poverty</td>
<td align="right">7.581</td>
<td align="right">6.033</td>
<td align="right">14.181</td>
<td align="right">8.666</td>
<td align="right">15.557</td>
<td align="right">10.408</td>
<td align="right">20.559</td>
<td align="right">13.115</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">disability</td>
<td align="right">19.556</td>
<td align="right">8.196</td>
<td align="right">23.135</td>
<td align="right">8.850</td>
<td align="right">24.373</td>
<td align="right">9.719</td>
<td align="right">23.863</td>
<td align="right">11.446</td>
<td align="right">0.013</td>
</tr>
<tr class="even">
<td align="left">white</td>
<td align="right">74.506</td>
<td align="right">23.050</td>
<td align="right">46.186</td>
<td align="right">28.672</td>
<td align="right">36.943</td>
<td align="right">27.730</td>
<td align="right">36.874</td>
<td align="right">28.197</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">black</td>
<td align="right">6.483</td>
<td align="right">14.056</td>
<td align="right">23.182</td>
<td align="right">28.434</td>
<td align="right">22.462</td>
<td align="right">27.847</td>
<td align="right">29.809</td>
<td align="right">27.748</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">asian</td>
<td align="right">8.447</td>
<td align="right">7.092</td>
<td align="right">11.822</td>
<td align="right">13.307</td>
<td align="right">16.679</td>
<td align="right">18.267</td>
<td align="right">9.954</td>
<td align="right">13.308</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">otherrace</td>
<td align="right">10.564</td>
<td align="right">9.858</td>
<td align="right">18.810</td>
<td align="right">17.893</td>
<td align="right">23.915</td>
<td align="right">16.646</td>
<td align="right">23.364</td>
<td align="right">17.182</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">hispanic</td>
<td align="right">12.722</td>
<td align="right">12.028</td>
<td align="right">21.387</td>
<td align="right">22.911</td>
<td align="right">27.207</td>
<td align="right">21.051</td>
<td align="right">28.420</td>
<td align="right">23.075</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">nowork</td>
<td align="right">17.447</td>
<td align="right">7.599</td>
<td align="right">12.464</td>
<td align="right">7.185</td>
<td align="right">12.221</td>
<td align="right">7.232</td>
<td align="right">13.998</td>
<td align="right">10.118</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p>We computed the average and standard deviation of the different
socio-demographic factors across the redlining grade groups. ANOVA was
utilized to compare the mean across different census tract grades (A, B,
C and D). The percentage of household enrolled in snap/ food stamp
program at the census tract level was significantly different among
groups with different redlining grades at 5% significance level. A-grade
census tracts had the lowest average percentage of SNAP enrollment
(5.72%, sd: 6.95%) and the average percentage of SNAP enrollment is the
highest in D-grade census tracts (23.70, sd: 17.85). In addition, the
groups with different redlining grades reported significant different
for the average percentage regarding households with children smaller
than 18 years, households with elderly grater than 60 years, households
below the poverty line, households with people with disability, race and
ethnicity, and employment status.</p>
</div>
<div id="comparing-census-tracts-with-hrs-for-grade-a-with-grade-d"
class="section level3">
<h3>Comparing census tracts with HRS for Grade A with Grade D</h3>
<pre class="r"><code>q1_vs_q4 = 
final_analysis|&gt;
  filter(red_grade %in%c(&quot;A&quot;,&quot;D&quot;))|&gt;
  mutate()

q1q4_desc = 
q1_vs_q4|&gt;
  group_by(red_grade)|&gt;
  summarise(
    ph_snap = mean(ph_snap),
    ph_with_children = mean(ph_with_children),
    ph_elderly = mean(ph_elderly),
    ph_below_poverty = mean(ph_below_poverty),
    ph_disability = mean(ph_disability),
    minority = mean(minority),
    ph_no_work = mean(ph_no_work),
    obesity = mean(obesity),
    highchol = mean(highchol),
    diabetes = mean(diabetes)
  )|&gt;
 pivot_longer(cols = -red_grade, names_to = &quot;variable&quot;, values_to = &quot;value&quot;)|&gt;
 pivot_wider(names_from = red_grade, names_prefix = &quot;grade_&quot;, values_from = value)|&gt;
 mutate(
    mean_diff = grade_D - grade_A,
  )|&gt;
  rename(outcome = variable)</code></pre>
<pre class="r"><code>uni_reg = function(dataset, outcomes, predictor) {
  results = list() 
  for (outcome in outcomes) {
    formula = as.formula(paste(outcome, &quot;~&quot;, predictor))
    model= t.test(
      formula,
      data = dataset
    )
    results[[outcome]] = broom::tidy(model)
  }
  
  combined_results = bind_rows(results, .id = &quot;outcome&quot;)
  return(combined_results)
}

outcomes = c(&quot;ph_snap&quot;,&quot;ph_with_children&quot;, &quot;ph_elderly&quot;,&quot;ph_below_poverty&quot;, &quot;ph_disability&quot;, &quot;ph_white&quot;, &quot;ph_black&quot;, &quot;ph_asian&quot;, &quot;ph_no_work&quot;, &quot;obesity&quot;, &quot;highchol&quot;, &quot;diabetes&quot;)


uni_reg(q1_vs_q4, outcomes, &quot;red_grade&quot;)|&gt;
  inner_join(q1q4_desc, by=&quot;outcome&quot;)|&gt;
  select(outcome, grade_A, grade_D, mean_diff, p.value)|&gt;
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">outcome</th>
<th align="right">grade_A</th>
<th align="right">grade_D</th>
<th align="right">mean_diff</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ph_snap</td>
<td align="right">5.722</td>
<td align="right">23.695</td>
<td align="right">17.972</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">ph_with_children</td>
<td align="right">20.572</td>
<td align="right">28.920</td>
<td align="right">8.348</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">ph_elderly</td>
<td align="right">52.581</td>
<td align="right">35.448</td>
<td align="right">-17.133</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">ph_below_poverty</td>
<td align="right">7.581</td>
<td align="right">20.559</td>
<td align="right">12.978</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">ph_disability</td>
<td align="right">19.556</td>
<td align="right">23.863</td>
<td align="right">4.307</td>
<td align="right">0.005</td>
</tr>
<tr class="even">
<td align="left">ph_no_work</td>
<td align="right">17.447</td>
<td align="right">13.998</td>
<td align="right">-3.449</td>
<td align="right">0.013</td>
</tr>
<tr class="odd">
<td align="left">obesity</td>
<td align="right">20.736</td>
<td align="right">28.710</td>
<td align="right">7.974</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">highchol</td>
<td align="right">37.275</td>
<td align="right">32.286</td>
<td align="right">-4.989</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">diabetes</td>
<td align="right">9.247</td>
<td align="right">11.584</td>
<td align="right">2.337</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p>Following the ANOVA test results, we wondered whether there is any
significant difference across the least-redlined (A-grade) and
most-redlined (D-grade) census tracts regarding snap enrollment,
socio-demographic factors, and health outcomes. Based on the t-test
outcome, D-grade census tracts had significantly higher average
percentage of households enrolled for SNAP, average percentage of
households with children, average percentage of households below the
poverty line, average percentage of households with peoplw with
diability, percentage of household with minority race compared to
A-grade census tracts. Additionally, A-grade census tract had
significantly higher average percentage of households with elderly,
average percentage of households with no worker.</p>
<p>Regarding the health outcomes, the average prevalence of obesity is
7.97% higher, and the average prevalence for diabetes is 2.34% higher in
the D-grade census tracts compared to A-grade census tracts. The average
prevalence of high cholesterol level is 4.99% higher in the A-grade
census tracts compared to D-grade census tracts. All of the difference
in the average prevalence is statistically signficant.</p>
</div>
</div>
<div id="regression-analysis-for-redlining-and-food-insecurity"
class="section level2">
<h2>Regression Analysis for Redlining and Food Insecurity</h2>
<p>Based on the results for the baseline characteristics analysis, we
computed a linear regression model to explore the association between
redlining grades and precentage of households enrolled in SNAP.</p>
<pre class="r"><code># univariate analysis
lm(ph_snap~red_grade,final_analysis)|&gt;
  broom::tidy()|&gt;
  knitr::kable(digits= 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5.722</td>
<td align="right">2.484</td>
<td align="right">2.303</td>
<td align="right">0.021</td>
</tr>
<tr class="even">
<td align="left">red_gradeB</td>
<td align="right">11.527</td>
<td align="right">2.608</td>
<td align="right">4.420</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">red_gradeC</td>
<td align="right">12.903</td>
<td align="right">2.528</td>
<td align="right">5.103</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">red_gradeD</td>
<td align="right">17.972</td>
<td align="right">2.553</td>
<td align="right">7.040</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p>Based on the univariate model, we found the percentage of household
enrolled in SNAP was 17.97%, 12.90% and 11.53% higher respectively in
the D-grade, C-grade and B-grade census tracts compared to A-grade
census tracts (all p-value &lt;0.001).</p>
<pre class="r"><code>## multivariate model 1
red_snap_m1 = lm(ph_snap~red_grade+minority+ph_elderly+ph_disability+ph_no_work,final_analysis)
tidy_model = broom::tidy(red_snap_m1)
ci = confint(red_snap_m1)

tidy_model|&gt;
  mutate(
    CI_Lower = ci[, 1],
    CI_Upper = ci[, 2],
  )|&gt;
  select(term, estimate, p.value, CI_Lower, CI_Upper)|&gt;
  knitr::kable(digits = 3, caption = &quot;Model 1 Estimates with 95% Confidence Intervals&quot;)</code></pre>
<table>
<caption>Model 1 Estimates with 95% Confidence Intervals</caption>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p.value</th>
<th align="right">CI_Lower</th>
<th align="right">CI_Upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.061</td>
<td align="right">0.613</td>
<td align="right">-5.174</td>
<td align="right">3.052</td>
</tr>
<tr class="even">
<td align="left">red_gradeB</td>
<td align="right">3.315</td>
<td align="right">0.087</td>
<td align="right">-0.476</td>
<td align="right">7.106</td>
</tr>
<tr class="odd">
<td align="left">red_gradeC</td>
<td align="right">2.034</td>
<td align="right">0.283</td>
<td align="right">-1.677</td>
<td align="right">5.745</td>
</tr>
<tr class="even">
<td align="left">red_gradeD</td>
<td align="right">4.044</td>
<td align="right">0.037</td>
<td align="right">0.249</td>
<td align="right">7.839</td>
</tr>
<tr class="odd">
<td align="left">minority</td>
<td align="right">0.162</td>
<td align="right">0.000</td>
<td align="right">0.144</td>
<td align="right">0.180</td>
</tr>
<tr class="even">
<td align="left">ph_elderly</td>
<td align="right">-0.334</td>
<td align="right">0.000</td>
<td align="right">-0.376</td>
<td align="right">-0.292</td>
</tr>
<tr class="odd">
<td align="left">ph_disability</td>
<td align="right">0.749</td>
<td align="right">0.000</td>
<td align="right">0.693</td>
<td align="right">0.804</td>
</tr>
<tr class="even">
<td align="left">ph_no_work</td>
<td align="right">0.320</td>
<td align="right">0.000</td>
<td align="right">0.259</td>
<td align="right">0.382</td>
</tr>
</tbody>
</table>
<pre class="r"><code>## histogram for snap enrollment
ggplot(final_analysis, aes(x = ph_snap)) +
  geom_histogram(binwidth = 5, fill = &quot;skyblue&quot;, color = &quot;black&quot;) +
  labs(
    title = &quot;Histogram of ph_snap&quot;,
    x = &quot;SNAP Enrollment (ph_snap)&quot;,
    y = &quot;Frequency&quot;
  ) +
  theme_minimal()</code></pre>
<p><img src="statistical_analysis_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>## multivariate model 2
red_snap_m2 =
  final_analysis|&gt;
  lm(log(ph_snap+1)~red_grade+minority+ph_elderly+ph_disability+ph_no_work, data=_)

tidy_model = broom::tidy(red_snap_m2)
ci = confint(red_snap_m2)

tidy_model|&gt;
  mutate(
    Back_Transformed_Estimate = exp(estimate),
    CI_Lower = exp(ci[, 1]),
    CI_Upper = exp(ci[, 2]),
    p.value = ifelse(p.value&lt;0.001, &quot;&lt;0.001&quot;, p.value)
  )|&gt;
  select(term, estimate, p.value, Back_Transformed_Estimate, CI_Lower, CI_Upper)|&gt;
  knitr::kable(digits = 3, caption = &quot;Model 2 Coefficients with Back-Transformed Estimates and 95% Confidence Intervals&quot;)</code></pre>
<table>
<caption>Model 2 Coefficients with Back-Transformed Estimates and 95%
Confidence Intervals</caption>
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="10%" />
<col width="34%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="left">p.value</th>
<th align="right">Back_Transformed_Estimate</th>
<th align="right">CI_Lower</th>
<th align="right">CI_Upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.963</td>
<td align="left">&lt;0.001</td>
<td align="right">2.619</td>
<td align="right">2.045</td>
<td align="right">3.354</td>
</tr>
<tr class="even">
<td align="left">red_gradeB</td>
<td align="right">0.574</td>
<td align="left">&lt;0.001</td>
<td align="right">1.776</td>
<td align="right">1.414</td>
<td align="right">2.231</td>
</tr>
<tr class="odd">
<td align="left">red_gradeC</td>
<td align="right">0.560</td>
<td align="left">&lt;0.001</td>
<td align="right">1.750</td>
<td align="right">1.400</td>
<td align="right">2.188</td>
</tr>
<tr class="even">
<td align="left">red_gradeD</td>
<td align="right">0.601</td>
<td align="left">&lt;0.001</td>
<td align="right">1.824</td>
<td align="right">1.452</td>
<td align="right">2.292</td>
</tr>
<tr class="odd">
<td align="left">minority</td>
<td align="right">0.012</td>
<td align="left">&lt;0.001</td>
<td align="right">1.012</td>
<td align="right">1.011</td>
<td align="right">1.013</td>
</tr>
<tr class="even">
<td align="left">ph_elderly</td>
<td align="right">-0.014</td>
<td align="left">&lt;0.001</td>
<td align="right">0.987</td>
<td align="right">0.984</td>
<td align="right">0.989</td>
</tr>
<tr class="odd">
<td align="left">ph_disability</td>
<td align="right">0.037</td>
<td align="left">&lt;0.001</td>
<td align="right">1.038</td>
<td align="right">1.035</td>
<td align="right">1.041</td>
</tr>
<tr class="even">
<td align="left">ph_no_work</td>
<td align="right">0.009</td>
<td align="left">&lt;0.001</td>
<td align="right">1.009</td>
<td align="right">1.005</td>
<td align="right">1.013</td>
</tr>
</tbody>
</table>
<pre class="r"><code>##multivariate model 3
red_snap_m3 = lm(log(ph_snap+1)~red_grade+ph_white+ph_black+ph_asian+ph_elderly+ph_disability+ph_no_work,final_analysis)

tidy_model = broom::tidy(red_snap_m3)
ci = confint(red_snap_m3)

tidy_model|&gt;
  mutate(
    Back_Transformed_Estimate = exp(estimate),
    CI_Lower = exp(ci[, 1]),
    CI_Upper = exp(ci[, 2]),
    p.value = ifelse(p.value&lt;0.001, &quot;&lt;0.001&quot;, p.value)
  )|&gt;
  select(term, estimate, p.value, Back_Transformed_Estimate, CI_Lower, CI_Upper)|&gt;
  knitr::kable(digits = 3, caption = &quot;Model 3 Coefficients with Back-Transformed Estimates and 95% Confidence Intervals&quot;)</code></pre>
<table>
<caption>Model 3 Coefficients with Back-Transformed Estimates and 95%
Confidence Intervals</caption>
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="10%" />
<col width="34%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="left">p.value</th>
<th align="right">Back_Transformed_Estimate</th>
<th align="right">CI_Lower</th>
<th align="right">CI_Upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">2.720</td>
<td align="left">&lt;0.001</td>
<td align="right">15.182</td>
<td align="right">11.386</td>
<td align="right">20.242</td>
</tr>
<tr class="even">
<td align="left">red_gradeB</td>
<td align="right">0.615</td>
<td align="left">&lt;0.001</td>
<td align="right">1.849</td>
<td align="right">1.478</td>
<td align="right">2.314</td>
</tr>
<tr class="odd">
<td align="left">red_gradeC</td>
<td align="right">0.586</td>
<td align="left">&lt;0.001</td>
<td align="right">1.798</td>
<td align="right">1.443</td>
<td align="right">2.240</td>
</tr>
<tr class="even">
<td align="left">red_gradeD</td>
<td align="right">0.665</td>
<td align="left">&lt;0.001</td>
<td align="right">1.944</td>
<td align="right">1.553</td>
<td align="right">2.434</td>
</tr>
<tr class="odd">
<td align="left">ph_white</td>
<td align="right">-0.019</td>
<td align="left">&lt;0.001</td>
<td align="right">0.981</td>
<td align="right">0.979</td>
<td align="right">0.983</td>
</tr>
<tr class="even">
<td align="left">ph_black</td>
<td align="right">-0.009</td>
<td align="left">&lt;0.001</td>
<td align="right">0.991</td>
<td align="right">0.989</td>
<td align="right">0.993</td>
</tr>
<tr class="odd">
<td align="left">ph_asian</td>
<td align="right">-0.010</td>
<td align="left">&lt;0.001</td>
<td align="right">0.990</td>
<td align="right">0.988</td>
<td align="right">0.993</td>
</tr>
<tr class="even">
<td align="left">ph_elderly</td>
<td align="right">-0.009</td>
<td align="left">&lt;0.001</td>
<td align="right">0.991</td>
<td align="right">0.988</td>
<td align="right">0.994</td>
</tr>
<tr class="odd">
<td align="left">ph_disability</td>
<td align="right">0.032</td>
<td align="left">&lt;0.001</td>
<td align="right">1.032</td>
<td align="right">1.029</td>
<td align="right">1.036</td>
</tr>
<tr class="even">
<td align="left">ph_no_work</td>
<td align="right">0.009</td>
<td align="left">&lt;0.001</td>
<td align="right">1.009</td>
<td align="right">1.005</td>
<td align="right">1.013</td>
</tr>
</tbody>
</table>
<div id="cross-validation-and-model-selection" class="section level3">
<h3>Cross Validation and Model Selection</h3>
<pre class="r"><code>cv_df =
  crossv_mc(final_analysis, 100)</code></pre>
<pre class="r"><code>cv_df =
cv_df|&gt;
  mutate(model_1 = map(train, \(df)  
                       lm(ph_snap~red_grade+minority+ph_elderly+ph_disability+ph_no_work,
                          data=df)),
         model_2 = map(train, \(df) 
                       lm(log(ph_snap+1)~red_grade+minority+ph_elderly+ph_disability
                          +ph_no_work,data=df)),
         model_3 = map(train, \(df) 
                       lm(log(ph_snap+1)~red_grade+ph_white+ph_black+ph_asian+ph_elderly
                          +ph_disability+ph_no_work, data=df))
           )|&gt;
  mutate(
    rmse_m1 = map2_dbl(model_1, test, \(mod, df) rmse(model = mod, data = df)),
    rmse_m2 = map2_dbl(model_2, test, \(mod, df) rmse(model = mod, data = df)),
    rmse_m3 = map2_dbl(model_3, test, \(mod, df) rmse(model = mod, data = df))
  )</code></pre>
<pre class="r"><code>cv_df |&gt; 
  select(starts_with(&quot;rmse&quot;)) |&gt; 
  pivot_longer(
    everything(),
    names_to = &quot;model&quot;, 
    values_to = &quot;rmse&quot;,
    names_prefix = &quot;rmse_&quot;) |&gt; 
  mutate(model = fct_inorder(model)) |&gt; 
  ggplot(aes(x = model, y = rmse)) + geom_violin()+
  labs(title = &quot;Model 1 vs. Model 2 &amp; 3&quot;)+
  theme_minimal()</code></pre>
<p><img src="statistical_analysis_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre class="r"><code>cv_df |&gt; 
  select(starts_with(&quot;rmse&quot;)) |&gt; 
  pivot_longer(
    everything(),
    names_to = &quot;model&quot;, 
    values_to = &quot;rmse&quot;,
    names_prefix = &quot;rmse_&quot;) |&gt; 
  mutate(model = fct_inorder(model)) |&gt; 
  filter(model == &quot;m2&quot; | model== &quot;m3&quot;)|&gt;
  ggplot(aes(x = model, y = rmse)) + geom_violin()+
  labs(title = &quot;Model 2 vs. Model 3&quot;)+
  theme_minimal()</code></pre>
<p><img src="statistical_analysis_files/figure-html/unnamed-chunk-12-2.png" width="672" /></p>
<p>Based on the rootmean square models, model 2 and 3 perform
signficantly better than model 1, while model 3 performs slightly better
than model 3.</p>
</div>
</div>
<div id="association-of-health-outcomes-and-redlining"
class="section level2">
<h2>Association of Health Outcomes and Redlining</h2>
<div id="preview-the-health-outcomes-data" class="section level3">
<h3>Preview the Health Outcomes Data</h3>
<pre class="r"><code>baseline_char|&gt;
  filter(variable %in% c(&quot;obesity&quot;,&quot;diabetes&quot;,&quot;highchol&quot;))|&gt;
  mutate(p.value = ifelse(p.value&lt;0.001, &quot;&lt;0.001&quot;, p.value)) |&gt; 
  knitr::kable(digits = 3)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="13%" />
<col width="10%" />
<col width="8%" />
<col width="10%" />
<col width="8%" />
<col width="10%" />
<col width="8%" />
<col width="10%" />
<col width="8%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="right">A_avg</th>
<th align="right">A_sd</th>
<th align="right">B_avg</th>
<th align="right">B_sd</th>
<th align="right">C_avg</th>
<th align="right">C_sd</th>
<th align="right">D_avg</th>
<th align="right">D_sd</th>
<th align="left">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">obesity</td>
<td align="right">20.736</td>
<td align="right">5.612</td>
<td align="right">25.923</td>
<td align="right">6.185</td>
<td align="right">27.506</td>
<td align="right">6.374</td>
<td align="right">28.710</td>
<td align="right">7.607</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">highchol</td>
<td align="right">37.275</td>
<td align="right">3.238</td>
<td align="right">34.500</td>
<td align="right">3.295</td>
<td align="right">34.142</td>
<td align="right">3.052</td>
<td align="right">32.286</td>
<td align="right">4.195</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">diabetes</td>
<td align="right">9.247</td>
<td align="right">2.476</td>
<td align="right">11.114</td>
<td align="right">2.909</td>
<td align="right">12.355</td>
<td align="right">2.923</td>
<td align="right">11.584</td>
<td align="right">4.417</td>
<td align="left">&lt;0.001</td>
</tr>
</tbody>
</table>
<pre class="r"><code>final_analysis |&gt;
  select(red_grade, obesity, diabetes, highchol) |&gt;
  pivot_longer(cols = c(obesity, diabetes, highchol), 
               names_to = &quot;outcome&quot;, 
               values_to = &quot;value&quot;) |&gt; 
  ggplot(aes(x = red_grade, y = value, fill = outcome)) +
  geom_boxplot() +
  facet_wrap(~ outcome, scales = &quot;free_y&quot;) +
  labs(title = &quot;Boxplot of Health Outcomes by Redlining Grade&quot;,
       x = &quot;Redlining Grade&quot;,
       y = &quot;Outcome Value&quot;)</code></pre>
<p><img src="statistical_analysis_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="linear-models-of-obesity-diabetes-and-high-cholesterol"
class="section level3">
<h3>Linear Models of Obesity, Diabetes and High Cholesterol</h3>
<pre class="r"><code>obesity_model = lm(obesity ~ red_grade, data = final_analysis) 
obesity_model|&gt; 
  broom::tidy()|&gt; 
  mutate(p.value = ifelse(p.value&lt;0.001, &quot;&lt;0.001&quot;, p.value)) |&gt; 
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="left">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">20.736</td>
<td align="right">1.124</td>
<td align="right">18.444</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">red_gradeB</td>
<td align="right">5.187</td>
<td align="right">1.180</td>
<td align="right">4.394</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">red_gradeC</td>
<td align="right">6.770</td>
<td align="right">1.144</td>
<td align="right">5.917</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">red_gradeD</td>
<td align="right">7.974</td>
<td align="right">1.155</td>
<td align="right">6.901</td>
<td align="left">&lt;0.001</td>
</tr>
</tbody>
</table>
<pre class="r"><code>diabetes_model = lm(diabetes ~ red_grade, data = final_analysis)
diabetes_model |&gt; 
  broom::tidy()|&gt; 
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">9.247</td>
<td align="right">0.576</td>
<td align="right">16.048</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">red_gradeB</td>
<td align="right">1.866</td>
<td align="right">0.605</td>
<td align="right">3.085</td>
<td align="right">0.002</td>
</tr>
<tr class="odd">
<td align="left">red_gradeC</td>
<td align="right">3.108</td>
<td align="right">0.586</td>
<td align="right">5.299</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">red_gradeD</td>
<td align="right">2.337</td>
<td align="right">0.592</td>
<td align="right">3.947</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<pre class="r"><code>chol_model = lm(highchol ~ red_grade, data = final_analysis) 
chol_model |&gt; 
  broom::tidy()|&gt; 
  mutate(p.value = ifelse(p.value&lt;0.001, &quot;&lt;0.001&quot;, p.value)) |&gt; 
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="left">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">37.275</td>
<td align="right">0.583</td>
<td align="right">63.977</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">red_gradeB</td>
<td align="right">-2.775</td>
<td align="right">0.612</td>
<td align="right">-4.536</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">red_gradeC</td>
<td align="right">-3.133</td>
<td align="right">0.593</td>
<td align="right">-5.284</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">red_gradeD</td>
<td align="right">-4.989</td>
<td align="right">0.599</td>
<td align="right">-8.332</td>
<td align="left">&lt;0.001</td>
</tr>
</tbody>
</table>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
